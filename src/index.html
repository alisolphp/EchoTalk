<!DOCTYPE html>
<html lang="en" class="h-100" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <title>EchoTalk | Offline Shadowing Practice</title>
    <meta name="theme-color" content="#43b6fd">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/icon-512.png">
</head>
<body class="d-flex flex-column h-100">

<div id="areaHome" class="container my-4 text-center area">
    <img src="icons/icon-512.png" style="width: 150px; margin-bottom: 1rem;">
    <h1 class="mb-2">EchoTalk</h1>
    <p class="lead mb-4">Your personal space for offline shadowing practice in <span class="practicing-languages-count">1</span> languages & 3 levels.</p>
    <div class="d-flex justify-content-center align-items-center gap-2">
        <button id="goToPracticeBtn" class="btn btn-primary btn-lg">Let's get started!</button>
        <button class="btn btn-outline-warning px-2 ps-1" data-bs-toggle="modal" data-bs-target="#myStreakModal" title="My Streak">üî• <span class="day-streak-number">&nbsp;</span></button>
    </div>
    <footer class="text-end text-muted small pt-3 opacity-25">
        <div id="app-version"></div>
    </footer>
</div>

<div id="areaPrePractice" class="container my-4 d-none area">
    <div class="d-flex justify-content-center align-items-center gap-2">
        <button class="btn btn-outline-warning px-2 ps-1 position-fixed top-0 end-0 m-2" data-bs-toggle="modal" data-bs-target="#myStreakModal" title="My Streak">üî• <span class="day-streak-number">&nbsp;&nbsp;</span></button>
        <h1 class="mb-0"><img src="icons/icon-512.png" style="width: 1em; margin-top: -8px;"> EchoTalk</h1>
        <select id="headerLanguageSelect" class="form-select form-select-sm header-lang-select d-none" aria-label="Select Language"></select>
    </div>
    <h2 class="mb-3 text-center">Offline Shadowing Practice</h2>

    <div class="row mb-2 d-none">
        <div class="col text-center">
            <div id="backHomeButton" class="d-none backHomeButton">
                <button class="btn btn-outline-secondary">Back Home</button>
            </div>
            <button class="btn btn-outline-info" data-bs-toggle="modal" data-bs-target="#quickStartModal"><i class="bi bi-info-circle-fill"></i> Quick Start</button>
        </div>
    </div>

    <div id="configArea">
        <div class="mb-3">
            <label for="sentenceInput" class="form-label">Enter your sentence or
                <button id="useSampleBtn" class="btn btn-secondary small py-0 px-2 me-1">Use a random Sample</button>:
            </label>
            <textarea id="sentenceInput" class="form-control" placeholder="Type or pick a sample sentence"></textarea>
        </div>
        <div class="mb-3">
            <div id="sampleSentence" class="fs-5"></div>
            <small class="text-muted">Click any word to set the starting point.</small>
        </div>

        <div class="row mb-3">
            <div class="col">
                <button id="startBtn" class="btn btn-primary d-block w-100"><i class="bi bi-rocket-takeoff-fill"></i> Start Practice</button>
            </div>
        </div>
    </div>

    <div id="practiceArea" class="d-none">
        <div id="practice-ui-container">
            <div class="mb-3">
                <div id="fullSentence" class="fs-5 mb-2 d-none"></div>

                <button id="slowBtn" style="margin-top: -0.3em;font-size: 20pt; color:#8fc9ff; text-shadow: 0px 0px 10px #59acf9;"
                        class="btn pt-1 pb-2 px-2" title="Play Slower">
                    <i class="bi bi-play-fill"></i><sub style="margin-left: -10px; font-size: 0.5em;">üê¢</sub>
                </button>

                <button id="fastBtn" style="margin-top: -0.3em;font-size: 20pt; color:#8fc9ff; text-shadow: 0px 0px 10px #59acf9; margin-left: -5px;"
                        class="btn pt-1 pb-2 px-2" title="Play Faster">
                    <i class="bi bi-play-fill"></i><sub style="margin-left: -10px; font-size: 0.5em;">üêá</sub>
                </button>

                <div id="sentence-container" class="fs-3 fw-bold mb-3 d-inline"></div>
            </div>
            <div class="row mb-3">
                <div class="d-inline w-auto" id="instructionText">Now it's your turn. Tap the mic icon on your keyboard and speak the word.</div>
                <div class="d-inline w-auto">
                    <button id="showTtsWarningBtn" class="btn btn-sm btn-outline-warning d-inline-block">
                        <i class="bi bi-volume-mute"></i> I can't hear anything...
                    </button>
                </div>
            </div>
            <div class="input-group mb-3">
                <input type="text" id="userInput" class="form-control" placeholder="Tap keyboard mic">
            </div>
            <div>
                <button id="checkBtn" class="btn btn-success d-block w-100 py-3">Check/Skip</button>
            </div>
            <div class="visualizer-container">
                <img src="images/sound-wave-animation.webp" id="soundWaveVisualizer" alt="Sound Wave Animation">
            </div>
            <div id="feedback" class="mb-3" style="min-height: 60px;">
                <canvas id="audio-visualizer" class="d-none" height="50"></canvas>
                <div id="feedback-text" class="fs-5"></div>
            </div>
        </div>
        <div id="session-complete-container" class="d-none"></div>
    </div>
</div>

<div id="areaOptions" class="container my-4 d-none area">
    <h1 class="mb-4 text-center">Options <small class="text-muted">(Auto save)</small></h1>

    <div>
        <div class="card bg-dark-subtle mb-3">
            <div class="card-body">
                <h6 class="card-title mb-3">Select Content to Practice</h6>
                <div class="row mb-3">
                    <div class="col">
                        <label for="languageSelect" class="form-label fw-bold"><i class="bi bi-translate" style="color: #677fff;"></i> Select Language:</label>
                        <select id="languageSelect" class="form-select"></select>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <label for="levelSelect" class="form-label fw-bold"><i class="bi bi-bar-chart-line-fill" style="color: #39bc58;"></i> Level:</label>
                        <select id="levelSelect" class="form-select"></select>
                    </div>
                    <div class="col">
                        <label for="categorySelect" class="form-label fw-bold"><i class="bi bi-folder-fill" style="color: #ffcb00;"></i> Category:</label>
                        <select id="categorySelect" class="form-select"></select>
                    </div>
                </div>
            </div>
        </div>

        <div class="card bg-dark-subtle mb-3">
            <div class="card-body">
                <h6 class="card-title mb-3">Practice Configuration</h6>

                <div class="mb-3">
                    <label for="practiceModeSelect" class="form-label fw-bold">Practice Mode:</label>
                    <select id="practiceModeSelect" class="form-select">
                        <option value="skip">üéß Skip-Only (Listen &amp; Repeat)</option>
                        <option value="auto-skip">üïí Auto-Skip (Practice Within Time)</option>
                        <option value="check">üé§ Check Mode (Use Keyboard's Mic)</option>
                    </select>
                </div>

                <div class="row mb-3">
                    <div class="col">
                        <label for="speechRateSelect" class="form-label fw-bold">Speech Speed:</label>
                        <select id="speechRateSelect" class="form-select">
                            <option value="0">ü™Ñ Auto (recommended)</option>
                            <option value="0.6">üê¢ Slow</option>
                            <option value="0.8">üßç Medium</option>
                            <option value="1">üö∂ Normal</option>
                            <option value="1.2">üèÉ Fast</option>
                            <option value="1.4">üöó Furious</option>
                        </select>
                    </div>

                    <div class="col">
                        <label for="repsSelect" class="form-label fw-bold">Repetitions:</label>
                        <select id="repsSelect" class="form-select"></select>
                    </div>
                </div>

                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" role="switch" id="recordToggle">
                    <label class="form-check-label" for="recordToggle"><i class="bi bi-mic-fill" style="color: #ffb300;"></i> <strong>Record my voice</strong> to compare later (completely locally)</label>
                </div>
            </div>
        </div>

        <div class="card border-danger p-0">
            <details>
                <summary class="card-title text-danger small p-2 m-0">Danger Zone</summary>
                <div class="card-body">
                    <p class="card-text small text-muted">This will permanently delete all your data and recordings.</p>
                    <button id="resetBtn" class="btn btn-danger w-100">Reset App</button>
                </div>
            </details>
        </div>

        <div class="modal-footer mt-3">
            <button type="button" class="btn btn-success opacity-50 backHomeButton">
                <i class="bi bi-check-square-fill"></i>
                <small>Saved Automatically</small>
            </button>
            <button type="button" class="btn btn-secondary backHomeButton ms-2">Close</button>
        </div>
    </div>

</div>

<div id="areaForYou" class="container my-4 d-none area">
    <h1 class="mb-4 text-center">For You</h1>
    <div class="list-group">
        <a href="#" id="showRecordingsBtn" class="list-group-item list-group-item-action py-3">
            <i class="bi bi-file-earmark-music" style="color: #ff00d7;"></i>
            My Recordings
        </a>
        <a href="#" id="showPracticesBtn" class="list-group-item list-group-item-action py-3">
            <i class="bi bi-journal-check" style="color: #78ff65;"></i>
            My Practices
        </a>
        <a href="#" id="showProgressBtn" class="list-group-item list-group-item-action d-none">
            <i class="bi bi-bar-chart-line-fill"></i>
            My Progress
        </a>
        <a href="#" id="showStreakBtn" class="list-group-item list-group-item-action py-3" data-bs-toggle="modal" data-bs-target="#myStreakModal">
            <i class="bi bi-fire" style="color: #ff8f3d;"></i>
            My Streak
        </a>
    </div>
</div>

<nav class="nav-bottom">
    <div class="nav-items">
        <a href="#" id="navHome" class="nav-item active">
            <i class="bi bi-house-fill"></i>
            <span>Home</span>
        </a>
        <a href="#" id="navHelp" class="nav-item" data-bs-toggle="modal" data-bs-target="#quickStartModal">
            <i class="bi bi-question-circle-fill"></i>
            <span>Help</span>
        </a>
        <a href="#" id="navPrePractice" class="nav-item">
            <i class="bi bi-mic-fill"></i>
            <span>Practice</span>
        </a>
        <a href="#" id="navOptions" class="nav-item">
            <i class="bi bi-sliders"></i>
            <span>Options</span>
        </a>
        <a href="#" id="navForYou" class="nav-item">
            <i class="bi bi-person-fill"></i>
            <span>For You</span>
        </a>
    </div>
</nav>

<div class="modal fade" id="quickStartModal" tabindex="-1" aria-labelledby="quickStartModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="quickStartModalLabel">Welcome & Quick Start Guide</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">

                <h5>What is Shadowing?</h5>
                <p>Shadowing is a powerful technique to boost your fluency and pronunciation. It involves listening to a phrase and repeating it as quickly and accurately as possible. Watch this short video to see how it works:</p>

                <div class="text-center mb-4">
                    <button class="btn btn-outline-danger" id="loadVideoBtn">
                        <i class="bi bi-youtube"></i> Watch an Intro to Shadowing<br><small>(on YouTube)</small>
                    </button>
                </div>

                <div id="videoContainer" class="ratio ratio-16x9 d-none"></div>
                <script>
                    document.getElementById("loadVideoBtn").addEventListener("click", function() {
                        const container = document.getElementById("videoContainer");
                        if (!container.querySelector("iframe")) {
                            container.innerHTML = `
                                <iframe
                                    src="https://www.youtube.com/embed/KDpfN0TA4c4?autoplay=1"
                                    title="YouTube video player"
                                    frameborder="0"
                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                    allowfullscreen>
                                </iframe>
                            `;
                        }
                        container.classList.remove("d-none");
                        container.scrollIntoView({ behavior: "smooth" });
                    });
                </script>

                <hr>

                <h5>What is EchoTalk?</h5>
                <p>EchoTalk is your personal tool for mastering the Shadowing technique, helping you improve your pronunciation and fluency. It's designed with your privacy as the top priority:
                <ul>
                    <li><strong>Works Completely Offline:</strong> No internet connection is needed after the first load.</li>
                    <li><strong>Your Data is Protected:</strong> All your practices and recordings stay securely on your device and are never sent to any server.</li>
                    <li><strong>Installable on Your Phone:</strong> You can add EchoTalk to your home screen just like a regular app for easy access anytime, anywhere.</li>
                </ul>
                </p>
                <hr>

                <h5>Quick Start Guide</h5>
                <ol>
                    <li><strong>Enter your sentence:</strong> Type or paste the text you want to practice or simply click <strong>"Use a Sample"</strong> to load a sentence tailored to your level.</li>
                    <li>Press the <strong>"Start Practice"</strong> button to begin.</li>
                </ol>
                <div class="text-center mb-4">
                    <a class="backHomeButton btn btn-primary" data-bs-dismiss="modal">
                        <i class="bi bi-check-square"></i> I got it. Let's dive into practicing!
                    </a>
                </div>
                <hr>

                <h4 class="mb-3 text-center">üöÄ Discover Our Powerful Features üöÄ</h4>

                <h5>üß† Smart Training & Learning Modes</h5>
                <ul>
                    <li><strong>Auto-Skip Mode:</strong> Enjoy a hands-free practice experience! After each phrase plays, the app pauses for you to repeat, then automatically moves on.</li>
                    <li><strong>Smart Auto-Settings:</strong>
                        <ul>
                            <li><strong>Auto Repetition:</strong> Select "Auto (recommended)," and the app intelligently sets the repetition count based on your practice history.</li>
                            <li><strong>Auto Speed:</strong> Choose "Auto," and the playback speed adjusts during your session, starting slower and getting faster as you warm up.</li>
                        </ul>
                    </li>
                    <li><strong>Intelligent Sentence Splitting:</strong> The app breaks down sentences meaningfully, creating smaller chunks for beginners and avoiding single, low-impact words.</li>
                    <li><strong>Repetition Counter:</strong> During practice, a counter shows how many times the current phrase will repeat, so you always know what's next.</li>
                </ul>

                <h5>üé® Modern UI/UX</h5>
                <ul>
                    <li><strong>Multi-Language Support:</strong> Practice is not limited to English! You can also work with languages like Dutch, Polish, Portuguese, Russian, and more.</li>
                    <li><strong>Enhanced Word Interaction:</strong> Click any word to open a modal with powerful tools for learning its meaning, pronunciation, and even AI-powered analysis.</li>
                    <li><strong>Practice Streak Tracker:</strong> Stay motivated by tracking your consecutive practice days! A dedicated modal shows your streak on a calendar with detailed stats.</li>
                    <li><strong>"My Practices" History:</strong> The app saves every sentence you've practiced. You can review your history, grouped by language, and jump right back into a past session.</li>
                    <li><strong>Review Your Recordings:</strong> In "Check Mode," your voice recordings are saved. Access "My Recordings" to listen back to your pronunciation and track your improvement over time.</li>
                    <li><strong>Seamless Post-Practice Flow:</strong> After finishing a sentence, easily choose to "Repeat This Sentence" or "Try a New Sentence" to continue your learning journey.</li>
                    <li><strong>Celebration Animation:</strong> Enjoy a fun, rewarding animation after successfully completing a practice session.</li>
                    <li><strong>Visual Recording Feedback:</strong> See live sound waves that visualize your voice as you record.</li>
                </ul>

                <h5>üìù Rich Content & Integrations</h5>
                <ul>
                    <li><strong>Personalized Sample Sentences:</strong> Click the "Use a Sample" button to get sentences based on your chosen level and category of interest (configurable in Settings).</li>
                    <li><strong>Phrase Translation & Analysis:</strong> While practicing, click on any word to translate the current phrase with Google Translate or analyze it with AI chatbots.</li>
                </ul>

                <h5>‚öôÔ∏è Performance & Technology</h5>
                <ul>
                    <li><strong>Optimized for Offline Use:</strong> The app runs fastest when you're offline, as it uses your device's powerful native speech engines for a seamless experience.</li>
                    <li><strong>PWA with Auto-Updates:</strong> The app works as a Progressive Web App (PWA) and a smart caching strategy ensures you always have the latest version.</li>
                    <li><strong>App Version Display:</strong> The version and build date are shown at the bottom of the page, making it easier for you to report any issues.</li>
                </ul>

                <hr>
                <div class="alert alert-info d-flex align-items-center" role="alert">
                    <i class="bi bi-lightbulb-fill flex-shrink-0 me-2"></i>
                    <div>
                        <strong>Pro-Tip:</strong> For the best performance, turn off your internet. This ensures the app uses your device's local speech engines, which are much faster and work offline.
                    </div>
                </div>

                <hr>
                <h5>Terms and Privacy</h5>
                <p class="small text-muted">
                    This project is open-source under the MIT License. By using this application, you are responsible for your own actions, especially when using AI integration features. You can view the source code on <a href="https://github.com/alisolphp/EchoTalk" target="_blank" rel="noopener noreferrer">GitHub</a>.
                </p>

                <hr>
                <p class="small text-muted">This tool works completely offline. No internet connection is required, and your privacy is protected as no data is sent to any server. Please ensure you have the
                    <span class="current-language-general-name">English</span>
                    TTS (Text-to-Speech) engine installed on your device.</p>

                <div class="text-center mb-4">
                    <a class="backHomeButton btn btn-secondary" data-bs-dismiss="modal">
                        <i class="bi bi-x"></i> Close
                    </a>
                </div>

            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="wordActionsModal" tabindex="-1" aria-labelledby="wordActionsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="wordActionsModalLabel"></h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="d-grid mb-3">
                    <button id="playWordBtn" class="btn btn-primary"><i class="bi bi-play-fill"></i> Play Word Again</button>
                </div>

                <div class="accordion" id="wordActionsAccordion">

                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingGoogle">
                            <button class="accordion-button collapsed online-only-header" type="button" data-bs-toggle="collapse" data-bs-target="#collapseGoogle" aria-expanded="false" aria-controls="collapseGoogle">
                                <i class="bi bi-google me-2"></i> Google Integrations
                                <i class="bi bi-wifi-off text-danger ms-auto me-2" title="Requires internet connection"></i>
                            </button>
                        </h2>
                        <div id="collapseGoogle" class="accordion-collapse collapse" aria-labelledby="headingGoogle" data-bs-parent="#wordActionsAccordion">
                            <div class="accordion-body p-2">
                                <div class="d-grid gap-2">
                                    <a id="searchPronunciationLink" href="#" target="_blank" class="btn btn-outline-info btn-sm">
                                        <i class="bi bi-soundwave me-2"></i>How to Pronounce
                                    </a>
                                    <a id="searchExamplesLink" href="#" target="_blank" class="btn btn-outline-warning btn-sm">
                                        <i class="bi bi-blockquote-left me-2"></i>Usage Examples
                                    </a>
                                    <a id="searchMeaningLink" href="#" target="_blank" class="btn btn-outline-success btn-sm">
                                        <i class="bi bi-book me-2"></i>Word Meaning
                                    </a>
                                    <a id="searchSentenceMeaningLink" href="#" class="btn btn-outline-light btn-sm">
                                        <i class="bi bi-translate me-2"></i>Sentence Meaning
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingAI">
                            <button class="accordion-button collapsed online-only-header" type="button" data-bs-toggle="collapse" data-bs-target="#collapseAI" aria-expanded="false" aria-controls="collapseAI">
                                <i class="bi bi-robot me-2"></i> AI Integrations
                                <i class="bi bi-wifi-off text-danger ms-auto me-2" title="Requires internet connection"></i>
                            </button>
                        </h2>
                        <div id="collapseAI" class="accordion-collapse collapse" aria-labelledby="headingAI" data-bs-parent="#wordActionsAccordion">
                            <div class="accordion-body p-2">
                                <div class="d-grid gap-2">
                                    <a id="translateWithGptBtn" href="#" class="btn btn-outline-primary btn-sm"><i class="bi bi-translate me-1"></i> AI Deep Translation</a>
                                    <a id="grammarAnalysisBtn" href="#" class="btn btn-outline-success btn-sm"><i class="bi bi-diagram-3 me-1"></i> AI Grammar Analysis</a>
                                    <a id="vocabExpansionBtn" href="#" class="btn btn-outline-warning btn-sm"><i class="bi bi-stack me-1"></i> AI Vocabulary Expansion</a>
                                    <a id="contextNuanceBtn" href="#" class="btn btn-outline-info btn-sm"><i class="bi bi-chat-quote me-1"></i> AI Context & Nuance</a>
                                    <a id="creativePracticeBtn" href="#" class="btn btn-outline-danger btn-sm"><i class="bi bi-lightbulb me-1"></i> AI Creative Practice</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="recordingsModal" tabindex="-1" aria-labelledby="recordingsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="recordingsModalLabel">My Recordings</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="accordion" id="recordingsList">
                    <p class="text-center text-muted">No recordings found yet. Enable "Record my voice" and start practicing!</p>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="practicesModal" tabindex="-1" aria-labelledby="practicesModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="practicesModalLabel"><i class="bi bi-journal-check me-2"></i>My Practices</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div id="practicesList">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="ttsWarningModal" tabindex="-1" aria-labelledby="ttsWarningModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="ttsWarningModalLabel"><i class="bi bi-exclamation-triangle-fill text-warning"></i> TTS Engine Problem: Missing or Incorrect Voice</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>It appears the Text-to-Speech (TTS) engine for <strong class="current-language-general-name">English</strong> language is not properly configured on your device. This can happen if the voice is missing or the pronunciation is incorrect.</p>
                <p>You may not hear any audio, or the audio may sound robotic or have the wrong accent. For the best experience, it's recommended to install the correct voice engine for this language from your device's settings.</p>
                <hr>
                <div class="mt-3">
                    <p class="fw-bold">Recommended Solution:</p>
                    <p>For the best offline experience, please install the TTS engine for <strong class="current-language-general-name">English</strong> language from your device's settings:</p>

                    <details class="card bg-dark-subtle border-secondary mb-2">
                        <summary class="card-title fw-bold p-2" style="cursor: pointer; list-style: none;">
                            ‚Ä∫ On Mobile
                        </summary>
                        <div class="card-body pt-0">
                            <p>Check your device's <code>Accessibility</code> or <code>Text-to-speech</code> settings.</p>
                            <p class="small text-muted mt-2"><strong>Note:</strong> You may need to restart your browser after installation.</p>
                        </div>
                    </details>

                    <details class="card bg-dark-subtle border-secondary mb-2">
                        <summary class="card-title fw-bold p-2" style="cursor: pointer; list-style: none;">
                            ‚Ä∫ On Windows
                        </summary>
                        <div class="card-body pt-0">
                            <p>Go to <code>Settings > Time & Language > Speech</code> and click "Add voices".</p>
                            <p class="small text-muted mt-2"><strong>Note:</strong> You may need to restart your browser after installation.</p>
                        </div>
                    </details>

                    <details class="card bg-dark-subtle border-secondary">
                        <summary class="card-title fw-bold p-2" style="cursor: pointer; list-style: none;">
                            ‚Ä∫ On macOS
                        </summary>
                        <div class="card-body pt-0">
                            <p>Go to <code>System Settings > Accessibility > Spoken Content</code> and select "Manage Voices...".</p>
                            <p class="small text-muted mt-2"><strong>Note:</strong> You may need to restart your browser after installation.</p>
                        </div>
                    </details>

                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal">I Understand</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="aiInstructionsModal" tabindex="-1" aria-labelledby="aiInstructionsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="aiInstructionsModalLabel"><i class="bi bi-robot text-info"></i> AI Analysis Guide</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" id="aiInstructionsModalBody">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Got it</button>
                <a href="https://gemini.google.com/" target="_blank" class="btn btn-primary">Go to Gemini <i class="bi bi-box-arrow-up-right"></i></a>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="confirmationModal" tabindex="-1" aria-labelledby="confirmationModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="confirmationModalLabel"><i class="bi bi-check-circle-fill text-success"></i> Prompt Copied!</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>Now, just paste the prompt in the new tab and enjoy the AI analysis.</p>
                <p class="small text-muted mb-0">To continue, click the "Go to ChatGPT" button.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="confirmGoToGptBtn">Let's Go to ChatGPT</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="myStreakModal" tabindex="-1" aria-labelledby="myStreakModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content text-center" id="streak-modal-content">

            <div class="confetti-container"></div>

            <div class="modal-body p-4">
                <button type="button" class="btn-close position-absolute top-0 end-0 m-3" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                <div class="streak-counter"><i class="bi bi-fire"></i> <span id="streakDaysHeader">0</span></div>
                <div class="streak-badge" id="streak-trophy-badge">
                    <i class="bi bi-trophy-fill"></i>
                </div>
                <h1 id="myStreakModalLabel" class="h4">Congratulations!</h1>
                <p id="streak-motivational-text" class="mb-3">You're on a roll! Keep up the amazing work.</p>

                <div class="d-flex justify-content-around my-4">
                    <div class="stat-item">
                        <div id="streakDays" class="stat-value">0</div>
                        <div class="stat-label">Day Streak</div>
                    </div>
                    <div class="stat-item practiceRelated-stat" style="cursor:pointer;" data-bs-dismiss="modal">
                        <div id="streakPractices" class="stat-value">0</div>
                        <div class="stat-label">Total Practices</div>
                    </div>
                    <div class="stat-item practiceRelated-stat" style="cursor:pointer;" data-bs-dismiss="modal">
                        <div id="streakSentences" class="stat-value">0</div>
                        <div class="stat-label">Sentences</div>
                    </div>
                </div>

                <div id="streakCalendar" class="d-flex justify-content-center gap-2 my-4">
                </div>

                <button id="continueLearningBtn" class="btn btn-primary w-100 mt-4" data-bs-dismiss="modal"><i class="bi bi-play-fill me-2"></i>Continue Practicing</button>

                <p class="small text-muted fst-italic mt-4">
                    Master your pronunciation with EchoTalk,
                    the free offline shadowing app. Share your progress and inspire others!
                </p>
            </div>
        </div>
    </div>
</div>

<button id="installBtn" class="btn btn-outline-primary d-none">Install App</button>

<script type="module" src="app.ts"></script>
</body>
</html>